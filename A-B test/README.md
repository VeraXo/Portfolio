# А-В тест
# Задача

Провести анализ результатов А/В теста по изучению влияния улучшенной рекомендательной системы на метрики деятельности интернет-магазина.

# Использованы инструменты:
import pandas as pd
import numpy as np
import datetime as dt
from datetime import timedelta
import matplotlib.pyplot as plt
import seaborn as sns
import math as mth
from plotly import graph_objects as go
from scipy import stats as st
import math as mth

# Дано

## Техничесоке задание на проведение теста:
* Название теста: recommender_system_test ;
* группы: А — контрольная, B — новая платёжная воронка;
* дата запуска: 2020-12-07;
* дата остановки набора новых пользователей: 2020-12-21;
* дата остановки: 2021-01-04;
* аудитория: 15% новых пользователей из региона EU;
* назначение теста: тестирование изменений, связанных с внедрением улучшенной рекомендательной системы;
* ожидаемое количество участников теста: 6000;
* ожидаемый эффект: за 14 дней с момента регистрации пользователи покажут улучшение каждой метрики не менее, чем на 10%:
- конверсии в просмотр карточек товаров — событие product_page ,
- просмотры корзины — product_cart ,
- покупки — purchase .

## Файлы с данными:
- сведения о участниках теста, состоящие из user_id, группа в тесте А или В, название теста  recommender_system_test или 'interface_eu_test';
- сведения о пользователях, зарегистрированных с начала теста, содержащие дату регистрации, регион, тип устройства;
- данные о поведении пользователей, включая дату события, название события, детали события;
- сведения о маркетинговых мероприятиях, акциях, распродажах и тому подобное.

# Решение

## Предварительная обработка данных

На данном этапе проверили наличие пропусков и явных дубликатов, поменяли тип данных о времени, исключили пользователей, зарегистрированных после даты остановки набора, предусмотренной в ТЗ, отказались связывать маркетинговые события и данные о результатах теста, так как маркетинговые события изменяют поведение пользователей в одинаковой мере для группы А и группы В.

## Объединение таблиц. Проверка корректности проведения теста.

Объединили сведения о участниках теста с данными о дате регистрации и поведении пользователей, исключили пользователей, оказавшихся участниками двух тестов, исключили события, совершенные после срока, установленного ТЗ.

Из-за неполноты данных о дате регистрации и совершенных действиях, а также одновременном включении пользователей в два теста, количество участников исследуемого теста составило 3050 пользователей, группа А - 2279, группа В - 771.

## Анализ результатов эксперимента.

Рассчитали конверсии в просмотр карточек товара, в просмотр корзины, в покупки. 
За 14 дней с момента регистрации в системе пользователи показали ухудшение каждой метрики.
Между показателями конверсии групп А/B теста имеются отличия, являются ли они статистически значимыми проверили, используя z-тест.

## Оценка результатов А-В теста

Применили функцию z_test к каждой паре сравнения долей групп А / В. Между группой В, в которой пользовались новыми рекомендациями, и контрольной группой А, статистически значимые различия обнаружились на этапе перехода от авторизации к продуктовой странице и от авторизации к покупке.

# Вывод

Проведенный тест не дает оснований сделать вывод о влиянии улучшенной рекомендательной системы на метрики деятельности интернет-магазина, так как он проведен не достаточно аккуратно. Целесообразно повторить тест в более спокойное время на бОльшей по размеру выборке, равномерно поделенной на группы.




